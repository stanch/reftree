"use strict";(self.webpackChunkreftree=self.webpackChunkreftree||[]).push([[66],{2468:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var i=a(4848),r=a(8453);const t={sidebar_position:3},s="User guide",o={id:"Guide",title:"User guide",description:"Trees",source:"@site/../site-gen/target/mdoc/Guide.md",sourceDirName:".",slug:"/Guide",permalink:"/reftree/docs/Guide",draft:!1,unlisted:!1,editUrl:"https://github.com/stanch/reftree/tree/main/docs/../site-gen/target/mdoc/Guide.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"mainSidebar",previous:{title:"Getting started",permalink:"/reftree/docs/GettingStarted"},next:{title:"Talks / Demos",permalink:"/reftree/docs/talks/"}},d={},c=[{value:"Trees",id:"trees",level:2},{value:"Renderers",id:"renderers",level:2},{value:"Diagrams",id:"diagrams",level:2},{value:"Animations",id:"animations",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"user-guide",children:"User guide"}),"\n",(0,i.jsx)(n.h2,{id:"trees",children:"Trees"}),"\n",(0,i.jsxs)(n.p,{children:["This library renders diagrams based on a simple data representation called\n",(0,i.jsx)(n.a,{href:"https://github.com/stanch/reftree/blob/master/core/src/main/scala/reftree/core/RefTree.scala",children:(0,i.jsx)(n.code,{children:"RefTree"})}),".\nEssentially, a ",(0,i.jsx)(n.code,{children:"RefTree"})," denotes either an object (",(0,i.jsx)(n.code,{children:"AnyRef"}),") with a number of fields,\nor a primitive (",(0,i.jsx)(n.code,{children:"AnyVal"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:["To render a value of type ",(0,i.jsx)(n.code,{children:"A"}),", you will need an implicit instance of ",(0,i.jsx)(n.code,{children:"ToRefTree[A]"}),".\nFor many Scala collections, as well as case classes, no extra work is needed,\nas these instances are readily available or generated on the fly."]}),"\n",(0,i.jsx)(n.p,{children:"You can configure the automatically generated instances like so:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import reftree.core.ToRefTree\n\ncase class Tree(size: Int, value: Int, children: List[Tree])\n\nimplicit val treeDerivationConfig: ToRefTree.DerivationConfig[Tree] =\n  ToRefTree.DerivationConfig[Tree]\n    .rename("MyTree")                                // display as \u201cMyTree\u201d\n    .tweakField("size", _.withName("s"))             // label the field \u201cs\u201d, instead of \u201csize\u201d\n    .tweakField("value", _.withTreeHighlight(true))  // highlight the value\n    .tweakField("children", _.withoutName)           // do not label the \u201cchildren\u201d field\n\nimplicitly[ToRefTree[Tree]] // auto-derivation will use the configuration above\n'})}),"\n",(0,i.jsx)(n.p,{children:"For something custom, manual derivation is the way to go, for example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import reftree.core._\n\nimplicit def treeInstance: ToRefTree[Tree] = ToRefTree[Tree] { tree =>\n  RefTree.Ref(tree, Seq(\n    // display the size as a hexadecimal number (why not?)\n    RefTree.Val.formatted(tree.size)(_.toHexString).toField.withName("s"),\n    // highlight the value\n    tree.value.refTree.withHighlight(true).toField.withName("value"),\n    // do not label the children\n    tree.children.refTree.toField\n  )).rename("MyTree") // change the name displayed for the class\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"renderers",children:"Renderers"}),"\n",(0,i.jsxs)(n.p,{children:["To render diagrams and animations, you will need a ",(0,i.jsx)(n.code,{children:"Renderer"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"For JVM:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import reftree.render._\nimport reftree.diagram._\nimport java.nio.file.Paths\n\nval renderer = Renderer(\n  renderingOptions = RenderingOptions(density = 75),\n  directory = Paths.get(ImagePath, "guide")\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can also pass a ",(0,i.jsx)(n.code,{children:"format"})," parameter as a String to the ",(0,i.jsx)(n.code,{children:"Renderer"})," constructor\nto specify the format you require. The default is ",(0,i.jsx)(n.code,{children:"png"}),". You can specify any\nfile type supported by ",(0,i.jsx)(n.code,{children:"dot -T"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"For Scala.js:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:"import reftree.render._\nimport reftree.diagram._\n\nval renderer = Renderer(\n  renderingOptions = RenderingOptions(density = 75)\n)\n"})}),"\n",(0,i.jsx)(n.p,{children:"There are two ways to use renderers:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"JVM"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import scala.collection.immutable.Queue\n\n// Option 1: using the `render` method\nrenderer.render("queue", Diagram(Queue(1)))\n\n// Option 2: using syntactic sugar\nimport renderer._\nDiagram(Queue(1)).render("queue")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Scala.js"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import org.scalajs.dom\n\n// Option 1: using the `render` method\nrenderer.render(dom.document.getElementById("diagram"), Diagram(List(1)))\n\n// Option 2: using syntactic sugar\nimport renderer._\nDiagram(List(1)).render(dom.document.getElementById("diagram"))\n'})}),"\n",(0,i.jsx)(n.p,{children:"You can set various options, for example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'// using the `render` method\nrenderer.tweakRendering(_.withVerticalSpacing(2)).render("queue", Diagram(Queue(1)))\n\n// using syntactic sugar\nDiagram(Queue(1)).render("queue", _.withVerticalSpacing(2))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"diagrams",children:"Diagrams"}),"\n",(0,i.jsx)(n.p,{children:"Diagrams can be created and combined into bigger diagrams using the following API:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'// no caption\nDiagram(Queue(1)).render("caption-none")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"caption-none",src:a(4990).A+"",width:"187",height:"274"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'// automatically set caption to "Queue(1) :+ 2"\nDiagram.sourceCodeCaption(Queue(1) :+ 2).render("caption-source")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"caption-source",src:a(1127).A+"",width:"297",height:"372"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'// use toString to get the caption, i.e. "Queue(1, 2)"\nDiagram.toStringCaption(Queue(1) :+ 2).render("caption-tostring")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"caption-tostring",src:a(1664).A+"",width:"288",height:"372"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'// merge two diagrams, set captions manually\n(Diagram(Queue(1)).withCaption("one") + Diagram(Queue(2)).withCaption("two")).render("one-two")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"one-two",src:a(6462).A+"",width:"392",height:"372"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'// isolate each diagram in its own namespace (graph nodes will not be shared across them)\n(Diagram(Queue(1)).toNamespace("one") + Diagram(Queue(2)).toNamespace("two")).render("namespaced")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"namespaced",src:a(6132).A+"",width:"402",height:"274"})}),"\n",(0,i.jsx)(n.h2,{id:"animations",children:"Animations"}),"\n",(0,i.jsx)(n.p,{children:"Animation is essentially a sequence of diagrams, which can be rendered to an animated GIF.\nThe simplest way to create an animation is to use the builder API:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'(Animation\n  .startWith(Queue(1))\n  .iterateWithIndex(2)((queue, i) => queue :+ (i + 1))\n  .build()\n  .render("animation-simple"))\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"animation-simple",src:a(949).A+"",width:"330",height:"471"})}),"\n",(0,i.jsx)(n.p,{children:"You can also configure how the diagram for each frame is produced:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'(Animation\n  .startWith(Queue(1))\n  .iterateWithIndex(2)((queue, i) => queue :+ (i + 1))\n  .build(Diagram(_).withCaption("My Queue").withColor(2))\n  .render("animation-captioned-red"))\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"animation-captioned-red",src:a(5802).A+"",width:"305",height:"471"})}),"\n",(0,i.jsxs)(n.p,{children:["Note that by default the library will try to reduce the average movement of\nall tree nodes across animation frames. Sometimes you want to \u201canchor\u201d\nthe root of the data structure instead, to force it to stay still\nwhile everything else is moving. You can achieve this via ",(0,i.jsx)(n.code,{children:"withAnchor"})," method:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'(Animation\n  .startWith(Queue(1))\n  .iterateWithIndex(2)((queue, i) => queue :+ (i + 1))\n  .build(Diagram(_).withAnchor("queue").withCaption("This node is anchored!"))\n  .render("animation-anchored"))\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"animation-anchored",src:a(2955).A+"",width:"365",height:"471"})}),"\n",(0,i.jsx)(n.p,{children:"Finally, animations can be combined in sequence or in parallel, for example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'val queue1 = (Animation\n  .startWith(Queue(1))\n  .iterateWithIndex(2)((queue, i) => queue :+ (i + 1))\n  .build()\n  .toNamespace("one"))\n\nval queue2 = (Animation\n  .startWith(Queue(10))\n  .iterateWithIndex(2)((queue, i) => queue :+ (10 * (i + 1)))\n  .build()\n  .toNamespace("two"))\n\n(queue1 + queue2).render("animation-parallel")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"animation-parallel",src:a(7938).A+"",width:"610",height:"471"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},2955:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/animation-anchored-8c8b5dfa237ead06adb46717a46ae600.gif"},5802:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/animation-captioned-red-83dcdff0e9a287254cfdb063d0bb5ffe.gif"},7938:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/animation-parallel-290fc9d667a8b0509bdbfa044269f886.gif"},949:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/animation-simple-2f9602a0503b36aed74a8e40e2b0b745.gif"},4990:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/caption-none-5d20b75c0a1aa4c1ffc800e1d6b6660f.png"},1127:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/caption-source-31a271258492ebebc6722d8e8933ea46.png"},1664:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/caption-tostring-ba525adeb95638e83be22d8857c98a9c.png"},6132:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/namespaced-6dd14cbd377faee7a4c6a3be9940fe68.png"},6462:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/one-two-fe52e6208faa3021867df57332b3e6ec.png"},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>o});var i=a(6540);const r={},t=i.createContext(r);function s(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);